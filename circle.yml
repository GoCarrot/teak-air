machine:
  xcode:
    version: 8.2.1
  environment:
    ANDROID_SDK_ROOT: /usr/local/share/android-sdk
    ADOBE_AIR_HOME: /usr/local/share/adobe-air-sdk
test:
  override:
  - ./compile
dependencies:
  # override:
  pre:
  # Remove 'Warning: File /Users/distiller/.android/repositories.cfg could not be loaded'
  - mkdir ~/.android/
  - echo "count=0" > ~/.android/repositories.cfg
  - ./setup
  # bundler:
  #   without: [production, osx]
  cache_directories:
    - ~/Library/Caches/Homebrew/
checkout:
  post:
    - git fetch --tags
deployment:
  prod:
    branch: master
    commands:
      - aws s3 cp bin/io.teak.sdk.Teak.ane s3://teak-build-artifacts/air/io.teak.sdk.Teak-$(git describe --tags --always).ane --acl public-read
      - aws s3 cp bin/io.teak.sdk.Teak.ane s3://teak-build-artifacts/air/io.teak.sdk.Teak.ane --acl public-read
