machine:
  xcode:
    version: 8.2.1
test:
  override:
  - ./compile
dependencies:
  # override:
  pre:
  - brew cask install --caskroom=~/Caskroom android-sdk
  - export ANDROID_HOME=/usr/local/share/android-sdk
  - ./setup
  # bundler:
  #   without: [production, osx]
  cache_directories:
    - "air-sdk"
    - "Caskroom"
checkout:
  post:
    - git fetch --tags
deployment:
  prod:
    branch: master
    commands:
      - aws s3 cp bin/io.teak.sdk.Teak.ane s3://teak-build-artifacts/air/io.teak.sdk.Teak-$(git describe --tags --always).ane --acl public-read
      - aws s3 cp bin/io.teak.sdk.Teak.ane s3://teak-build-artifacts/air/io.teak.sdk.Teak.ane --acl public-read
